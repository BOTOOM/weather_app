(this.webpackJsonpweather_app=this.webpackJsonpweather_app||[]).push([[0],{247:function(e,t,r){},495:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(33),i=r.n(a),o=(r(247),r(34)),s=r(20),u=r(45),j=r(197),l=r.n(j),d=r(208),h=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(0),r=Object(u.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){return c||a(l()({THREE:d,el:e.current})),function(){c&&c.destroy()}}),[c]),e},b=r(4),O=function(e){var t=e.children,r=h();return Object(b.jsx)("div",{className:"full",ref:r,children:t})},m=r(519),x=r(521),f=r(496),y=r(2),p=r(28),v=function(){var e=Object(n.useMemo)((function(){return{size:"6em"}}),[]);return Object(b.jsx)(O,{children:Object(b.jsx)(m.a,{container:!0,direction:"column",justify:"center",className:"full",children:Object(b.jsx)("div",{className:"highlight",children:Object(b.jsxs)(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center",children:[Object(b.jsx)(m.a,{item:!0,children:Object(b.jsx)(y.b.Provider,{value:e,children:Object(b.jsx)(p.b,{})})}),Object(b.jsxs)(m.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(b.jsx)(f.a,{variant:"h4",color:"inherit",children:"Weather App"}),Object(b.jsx)(x.a,{color:"inherit","aria-label":"menu",component:o.b,to:"/main",children:"Ingresar"})]})]})})})})},C=r(497),g=r(522),w=r(524),E=r(523),k=r(3),T=r(8),I=r(5),_=r(6),A=function(e){Object(I.a)(r,e);var t=Object(_.a)(r);function r(e){var n;return Object(k.a)(this,r),(n=t.call(this,e)).state={hasError:!1},n}return Object(T.a)(r,[{key:"componentDidCatch",value:function(e,t){console.log("ErrorInfo",t)}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)("h1",{children:"Hubo un error"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),r}(n.PureComponent),M=function(e){var t=e.children,r=Object(n.useMemo)((function(){return{size:"2em"}}),[]);return Object(b.jsxs)(m.a,{container:!0,justify:"center",children:[Object(b.jsx)(g.a,{position:"static",children:Object(b.jsxs)(E.a,{variant:"dense",children:[Object(b.jsx)(w.a,{color:"inherit","aria-label":"menu",children:Object(b.jsx)(x.a,{component:o.b,to:"/main",color:"inherit","aria-label":"menu",children:Object(b.jsx)(y.b.Provider,{value:r,children:Object(b.jsx)(p.b,{})})})}),Object(b.jsx)(f.a,{variant:"h6",color:"inherit",children:"Weather App"})]})}),Object(b.jsx)(m.a,{item:!0,xs:12,sm:11,md:10,lg:8,children:Object(b.jsx)(A,{children:t})})]})},L=r(25),S=r(527),F=r(526),D=r(529),W=r(40),H=r.n(W),R=r(14),z=r(61),P=r(97),N=r.n(P),q="f99bbd9e4959b513e9bd0d7f7356b38d",B=function(e){var t=e.city,r=e.countryCode;return"https://api.openweathermap.org/data/2.5/weather?q=".concat(t,",").concat(r,"&appid=").concat(q)},K=function(e){var t=e.city,r=e.countryCode;return"https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,",").concat(r,"&appid=").concat(q)},V=["clouds","clear","rain","snow","drizzle","thunderstorm"],Y={clouds:p.a,clear:p.b,rain:p.c,snow:p.e,drizzle:p.d,thunderstorm:p.f},J=function(e){var t=e.state,r=Y[t];return Object(b.jsx)(r,{})},X=r(198),$=r.n(X),G=function(e,t){return"".concat(e,"-").concat(t)},Q=function(e){return Number($()(e).from("K").to("C").toFixed(0))},U=function(e,t,r){var n=e.data,c=Q(n.main.temp),a=n.main.humidity,i=n.wind.speed,o=n.weather[0].main.toLowerCase(),s=V.includes(o)?o:null,u=G(t,r),j={temperature:c,state:s,humidity:a,wind:i};return Object(R.a)({},u,j)},Z=function(e,t,r){var c=Object(n.useState)(null),a=Object(u.a)(c,2),i=a[0],o=a[1];return Object(n.useEffect)((function(){var n=function(){var e=Object(z.a)(H.a.mark((function e(t,n){var c,a,i,s;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=B({city:t,countryCode:n}),e.prev=1,a=G(t,n),r({type:"SET_ALL_WEATHER",payload:Object(R.a)({},a,{})}),e.next=6,N.a.get(c);case 6:i=e.sent,s=U(i,t,n),r({type:"SET_ALL_WEATHER",payload:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response?o("Ha ocurrido un error en el servidor del clima"):e.t0.request?o("Verifique la conexi\xf3n a internet"):o("Error al cargar los datos");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}();e.forEach((function(e){var r=e.city,c=e.countryCode;t[G(r,c)]||n(r,c)}))}),[e,t,r]),{error:i,setError:o}},ee=function(e){var t=e.city,r=e.country;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(f.a,{display:"inline",variant:"h4",children:[t,", "]}),Object(b.jsx)(f.a,{display:"inline",variant:"h6",children:r})]})},te=r(525),re=function(e){var t=e.temperature,r=e.state,c=Object(n.useMemo)((function(){return{size:"6em"}}),[]);return Object(b.jsxs)(m.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(b.jsx)(y.b.Provider,{value:c,children:r?Object(b.jsx)(J,{state:r}):Object(b.jsx)(te.a,{variant:"circle",height:80,width:80})}),t?Object(b.jsx)(f.a,{display:"inline",variant:"h2",children:t}):Object(b.jsx)(te.a,{variant:"rect",height:80,width:80})]})},ne=c.a.createContext(),ce=c.a.createContext(),ae={allWeather:{},allChartData:{},allForecastItemList:{}},ie=function(e,t){switch(t.type){case"SET_ALL_WEATHER":var r=t.payload,n=Object(L.a)(Object(L.a)({},e.allWeather),r);return Object(L.a)(Object(L.a)({},e),{},{allWeather:n});case"SET_CHART_DATA":var c=t.payload,a=Object(L.a)(Object(L.a)({},e.allChartData),c);return Object(L.a)(Object(L.a)({},e),{},{allChartData:a});case"SET_FORECAST_ITEM_LIST":var i=t.payload,o=Object(L.a)(Object(L.a)({},e.allForecastItemList),i);return Object(L.a)(Object(L.a)({},e),{},{allForecastItemList:o});default:return e}},oe=function(e){var t=e.children,r=Object(n.useReducer)(ie,ae),c=Object(u.a)(r,2),a=c[0],i=c[1];return Object(b.jsx)(ce.Provider,{value:i,children:Object(b.jsx)(ne.Provider,{value:a,children:t})})},se=function(){var e=Object(n.useContext)(ce);if(!e)throw Error("Must set dispatch provider");return e},ue=function(){var e=Object(n.useContext)(ne);if(!e)throw Error("Must set state provider");return e},je=c.a.memo((function(e){var t=e.city,r=e.countryCode,n=e.country,c=e.weather,a=e.eventOnClickCity;return Object(b.jsx)(D.a,{button:!0,onClick:function(){return a(t,r)},children:Object(b.jsxs)(m.a,{container:!0,justify:"center",alignItems:"center",children:[Object(b.jsx)(m.a,{item:!0,md:9,xs:12,children:Object(b.jsx)(ee,{city:t,country:n})}),Object(b.jsx)(m.a,{item:!0,md:3,xs:12,children:Object(b.jsx)(re,{temperature:c&&c.temperature,state:c&&c.state})})]})})})),le=function(e){var t=e.cities,r=e.onClickCity,n=se(),c=ue().allWeather,a=Z(t,c,n),i=a.error,o=a.setError;return Object(b.jsxs)("div",{children:[i&&Object(b.jsx)(S.a,{onClose:function(){return o(null)},severity:"error",children:i}),Object(b.jsx)(F.a,{children:t.map((function(e){return(t=r,function(e,r){var n=e.city,c=e.countryCode;return Object(b.jsx)(je,Object(L.a)({eventOnClickCity:t,weather:r},e),G(n,c))})(e,c[G(e.city,e.countryCode)]);var t}))})]})},de=c.a.memo(le),he=[{city:"Buenos Aires",country:"Argentina",countryCode:"AR"},{city:"Bogot\xe1",country:"Colombia",countryCode:"CO"},{city:"Madrid",country:"Espa\xf1a",countryCode:"ES"},{city:"Ciudad de M\xe9xico",country:"M\xe9xico",countryCode:"MX"}],be=function(){var e=Object(s.f)(),t=c.a.useCallback((function(t,r){e.push("/city/".concat(r,"/").concat(t))}),[e]);return Object(b.jsx)(M,{children:Object(b.jsx)(C.a,{elevation:3,children:Object(b.jsx)(de,{cities:he,onClickCity:t})})})},Oe=r(528),me=function(e){var t=e.humidity,r=e.wind;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(f.a,{children:["Humedad: ",t,"%"]}),Object(b.jsxs)(f.a,{children:["Viento: ",r," km/h"]})]})},xe=r(36),fe=function(e){var t=e.data,r=Object(n.useMemo)((function(){return{top:20,bottom:20,left:5,right:5}}),[]);return Object(b.jsx)(xe.e,{height:250,width:"95%",children:Object(b.jsxs)(xe.d,{margin:r,data:t,children:[Object(b.jsx)(xe.g,{dataKey:"dayHour"}),Object(b.jsx)(xe.h,{}),Object(b.jsx)(xe.a,{}),Object(b.jsx)(xe.f,{}),Object(b.jsx)(xe.b,{}),Object(b.jsx)(xe.c,{type:"monotone",dataKey:"max",stroke:"#FF0000"}),Object(b.jsx)(xe.c,{type:"monotone",dataKey:"min",stroke:"#0000FF"})]})})},ye=function(e){var t=e.weekDay,r=e.hour,c=e.state,a=e.temperature,i=Object(n.useMemo)((function(){return{size:"5em"}}),[]);return Object(b.jsxs)(m.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(b.jsx)(m.a,{item:!0,children:Object(b.jsx)(f.a,{children:t})}),Object(b.jsx)(m.a,{item:!0,children:Object(b.jsx)(f.a,{children:r})}),Object(b.jsx)(m.a,{item:!0,children:Object(b.jsx)(y.b.Provider,{value:i,children:Object(b.jsx)(J,{state:c})})}),Object(b.jsx)(m.a,{item:!0,children:Object(b.jsxs)(f.a,{children:[a," \xb0"]})})]})},pe=function(e){var t=e.forecastItemList;return Object(b.jsx)(m.a,{container:!0,justify:"space-around",alignItems:"center",children:t.map((function(e){return function(e){var t=e.weekDay,r=e.hour,n=e.state,c=e.temperature;return Object(b.jsx)(m.a,{"data-testid":"forecast-item-container",item:!0,children:Object(b.jsx)(ye,{hour:r,weekDay:t,state:n,temperature:c})},"".concat(t).concat(r))}(e)}))})},ve=r(133),Ce=r(53),ge=r.n(Ce),we=function(e){console.log("data",e);return[0,1,2,3,4,5].map((function(e){return ge()().add(e,"d")})).map((function(t){var r=e.list.filter((function(e){return ge.a.unix(e.dt).dayOfYear()===t.dayOfYear()}));console.log("day.dayOfYear()",t.dayOfYear()),console.log("tempObjArray",r);var n=r.map((function(e){return e.main.temp}));return{dayHour:t.format("ddd"),min:Q(Math.min.apply(Math,Object(ve.a)(n))),max:Q(Math.max.apply(Math,Object(ve.a)(n))),hasTemps:n.length>0}})).filter((function(e){return e.hasTemps}))},Ee=(r(494),function(e){var t=[4,8,12,16,20,24];return e.list.filter((function(e,r){return t.includes(r)})).map((function(e){return{hour:ge.a.unix(e.dt).hour(),weekDay:ge.a.unix(e.dt).format("dddd"),state:e.weather[0].main.toLowerCase(),temperature:Q(e.main.temp)}}))}),ke=function(e,t,r){var c=Object(s.g)(),a=c.city,i=c.countryCode;return Object(n.useDebugValue)("useCityPage ".concat(a)),Object(n.useEffect)((function(){var n=function(){var e=Object(z.a)(H.a.mark((function e(){var t,n,c,o,s,u;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K({city:a,countryCode:i}),n=G(a,i),e.prev=2,e.next=5,N.a.get(t);case 5:c=e.sent,o=c.data,s=we(o),r({type:"SET_CHART_DATA",payload:Object(R.a)({},n,s)}),u=Ee(o),r({type:"SET_FORECAST_ITEM_LIST",payload:Object(R.a)({},n,u)}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),c=G(a,i);e&&t&&!e[c]&&!t[c]&&n()}),[a,i,r,e,t]),{city:a,countryCode:i}},Te=function(){var e=se(),t=ue(),r=t.allWeather,c=t.allChartData,a=t.allForecastItemList,i=ke(c,a,e),o=i.city,s=i.countryCode,u=Object(n.useMemo)((function(){return[{city:o,countryCode:s}]}),[o,s]);Z(u,r,e);var j=G(o,s),l=r[j],d=c[j],h=a[j],O=s&&function(e){return he.filter((function(t){return t.countryCode===e}))[0].country}(s),x=l&&l.humidity,f=l&&l.wind,y=l&&l.state,p=l&&l.temperature;return Object(b.jsx)(M,{children:Object(b.jsxs)(m.a,{container:!0,justify:"space-around",direction:"column",spacing:2,children:[Object(b.jsx)(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"flex-end",children:Object(b.jsx)(ee,{city:o,country:O})}),Object(b.jsxs)(m.a,{container:!0,item:!0,xs:12,justify:"center",children:[Object(b.jsx)(re,{state:y,temperature:p}),x&&f&&Object(b.jsx)(me,{humidity:x,wind:f})]}),Object(b.jsx)(m.a,{item:!0,children:!d&&!h&&Object(b.jsx)(Oe.a,{})}),Object(b.jsx)(m.a,{item:!0,children:d&&Object(b.jsx)(fe,{data:d})}),Object(b.jsx)(m.a,{item:!0,children:h&&Object(b.jsx)(pe,{forecastItemList:h})})]})})},Ie=function(){return Object(b.jsx)(m.a,{container:!0,direction:"column",justify:"center",className:"full",children:Object(b.jsx)("div",{className:"highlight",children:Object(b.jsxs)(m.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center",children:[Object(b.jsx)(m.a,{item:!0,children:Object(b.jsx)(y.b.Provider,{value:{size:"6em"},children:Object(b.jsx)(p.c,{})})}),Object(b.jsxs)(m.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(b.jsx)(f.a,{variant:"h4",color:"inherit",children:"404 | La p\xe1gina no existe"}),Object(b.jsx)(x.a,{color:"inherit","aria-label":"menu",component:o.b,to:"/main",children:"Volver al inicio"})]})]})})})},_e=function(){return Object(b.jsx)(oe,{children:Object(b.jsx)(o.a,{children:Object(b.jsxs)(s.c,{children:[Object(b.jsx)(s.a,{exact:!0,path:"/weather_app",children:Object(b.jsx)(v,{})}),Object(b.jsx)(s.a,{path:"/weather_app/main",children:Object(b.jsx)(be,{})}),Object(b.jsx)(s.a,{path:"/weather_app/city/:countryCode/:city",children:Object(b.jsx)(Te,{})}),Object(b.jsx)(s.a,{children:Object(b.jsx)(Ie,{})})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(b.jsx)(_e,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[495,1,2]]]);
//# sourceMappingURL=main.a3c631f6.chunk.js.map